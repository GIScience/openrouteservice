# Docker Compose file for the openrouteservice (ORS) application
# Documentation and examples can be found on https://giscience.github.io/openrouteservice/run-instance/installation/running-with-docker
version: '3.8'
services:
  ors-app:
    # Activate the following lines to build the container from the repository
    #build:
    #  context: ./
    container_name: ors-app
    ports:
      - "8080:8082"
      - "9001:9001"
    image: openrouteservice/openrouteservice:nightly
    user: "${UID:-0}:${GID:-0}"
    volumes:
      - ./graphs:/home/ors/graphs
      - ./elevation_cache:/home/ors/elevation_cache
      - ./config:/home/ors/config
      - ./logs:/home/ors/logs
      - ./files:/home/ors/files
    environment:
      REBUILD_GRAPHS: False # Set to True to rebuild graphs on container start.
      CONTAINER_LOG_LEVEL: INFO # DEBUG, INFO, WARN, ERROR
      # Configure your whole container with only property ENVs.
      # These can be set alternatively or additional to the yml configuration file.
      # See the ors-config.env file for more options.
      # To have a configuration file-less container, set at least the following properties:
      #ors.engine.source_file: /home/ors/files/example-heidelberg.osm.gz
      #ors.engine.graphs_root_path=/home/ors/graphs
      #ors.engine.elevation.cache_path=/home/ors/elevation_cache
      #ors.engine.profiles.car.enabled: true
    # Too much under 'environment:'? Use an env_file instead and define everything in there:
    #env_file: ors-config.env
    #healthcheck:
    #  test: curl --fail http://localhost:8080/ors/v2/health || exit 1
    #  start_period: 1m
    #  interval: 10s
    #  timeout: 2s
    #  retries: 3
    #  disable: false